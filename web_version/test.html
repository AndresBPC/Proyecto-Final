<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Escena Jorge</title>
    <style>
        body {
            font-family: Arial;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .test-box {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #00d4ff;
        }
        .pass { color: #00ff00; }
        .fail { color: #ff0000; }
        button {
            padding: 10px 20px;
            background: #0066cc;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0052a3; }
    </style>
</head>
<body>
    <h1>üß™ Test - Escena de Decisiones Jorge</h1>

    <div class="test-box">
        <h3>‚úÖ Verificaci√≥n de Archivos</h3>
        <p>Estado: <span id="fileStatus">Cargando...</span></p>
    </div>

    <div class="test-box">
        <h3>üéÆ Datos Cargados</h3>
        <button onclick="testGameData()">Probar datos.js</button>
        <p id="gameDataResult"></p>
    </div>

    <div class="test-box">
        <h3>üîç Verificar Escena 'primera_decision'</h3>
        <button onclick="testFirstDecision()">Verificar opciones</button>
        <p id="decisionResult"></p>
    </div>

    <div class="test-box">
        <h3>üîó Verificar Enlaces</h3>
        <button onclick="testLinks()">Probar flujo</button>
        <p id="linksResult"></p>
    </div>

    <div class="test-box">
        <h3>üéØ Ir a Escena Jorge</h3>
        <button onclick="goToJorge()">Ir a Primera Decisi√≥n</button>
        <p>Si funciona, ir√°s a la escena de Jorge (primera_decision)</p>
    </div>

    <script src="data.js"></script>
    <script>
        function testGameData() {
            const result = document.getElementById('gameDataResult');
            try {
                if (window.gameData) {
                    const escenas = Object.keys(gameData.escenas).length;
                    result.innerHTML = `<span class="pass">‚úÖ gameData cargado correctamente</span><br>
                                       Total de escenas: ${escenas}`;
                } else {
                    result.innerHTML = '<span class="fail">‚ùå gameData no est√° definido</span>';
                }
            } catch (e) {
                result.innerHTML = `<span class="fail">‚ùå Error: ${e.message}</span>`;
            }
        }

        function testFirstDecision() {
            const result = document.getElementById('decisionResult');
            try {
                const escena = gameData.escenas['primera_decision'];
                if (escena && escena.opciones && escena.opciones.length === 3) {
                    let html = '<span class="pass">‚úÖ Escena correcta</span><br>';
                    escena.opciones.forEach((opt, i) => {
                        html += `${i+1}. ${opt.texto} ‚Üí ${opt.siguiente}<br>`;
                    });
                    result.innerHTML = html;
                } else {
                    result.innerHTML = '<span class="fail">‚ùå Escena no encontrada o sin opciones</span>';
                }
            } catch (e) {
                result.innerHTML = `<span class="fail">‚ùå Error: ${e.message}</span>`;
            }
        }

        function testLinks() {
            const result = document.getElementById('linksResult');
            try {
                const enlaces = [
                    ['respuesta_jorge_0', gameData.escenas['respuesta_jorge_0'] ? '‚úÖ' : '‚ùå'],
                    ['respuesta_jorge_1', gameData.escenas['respuesta_jorge_1'] ? '‚úÖ' : '‚ùå'],
                    ['respuesta_jorge_2', gameData.escenas['respuesta_jorge_2'] ? '‚úÖ' : '‚ùå'],
                    ['pasan_semanas', gameData.escenas['pasan_semanas'] ? '‚úÖ' : '‚ùå']
                ];
                let html = '<span class="pass">Flujo de decisiones:</span><br>';
                enlaces.forEach(([nombre, status]) => {
                    html += `${status} ${nombre}<br>`;
                });
                result.innerHTML = html;
            } catch (e) {
                result.innerHTML = `<span class="fail">‚ùå Error: ${e.message}</span>`;
            }
        }

        function goToJorge() {
            alert('Ahora abre index.html y ver√°s la escena de Jorge con las opciones');
        }

        // Auto-test al cargar
        window.addEventListener('load', () => {
            document.getElementById('fileStatus').innerHTML = '<span class="pass">‚úÖ P√°gina cargada</span>';
            testGameData();
        });
    </script>
</body>
</html>
